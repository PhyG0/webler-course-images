<?xml version="1.0" encoding="UTF-8"?>
<svg width="620" height="210" viewBox="0 0 620 210" xmlns="http://www.w3.org/2000/svg">
            <text x="310" y="20" fill="#ffffff" font-size="13" font-weight="bold" text-anchor="middle">Step 3 — Clipping
                the Incident Edge in 3 Passes</text>

            <!-- === PANEL 1: clip left === -->
            <text x="103" y="45" fill="#ccc" font-size="11" text-anchor="middle">① Clip left side</text>
            <!-- ref edge -->
            <line x1="55" y1="100" x2="160" y2="100" stroke="#00ff88" stroke-width="3" stroke-linecap="round" />
            <text x="107" y="116" fill="#00ff88" font-size="10" text-anchor="middle">ref edge</text>
            <!-- left plane -->
            <line x1="55" y1="55" x2="55" y2="145" stroke="#ff4466" stroke-width="1.5" stroke-dasharray="4,3" />
            <text x="42" y="52" fill="#ff4466" font-size="9">left</text>
            <!-- right plane -->
            <line x1="160" y1="55" x2="160" y2="145" stroke="#888" stroke-width="1" stroke-dasharray="4,3" />
            <!-- incident edge original (faded) -->
            <line x1="30" y1="70" x2="155" y2="130" stroke="#ffaa00" stroke-width="2" stroke-dasharray="4,3"
                opacity="0.4" />
            <!-- incident edge clipped left -->
            <line x1="55" y1="83" x2="155" y2="130" stroke="#ffaa00" stroke-width="3" stroke-linecap="round" />
            <circle cx="55" cy="83" r="4" fill="#ff4466" />
            <text x="62" y="79" fill="#ff4466" font-size="9">new pt</text>

            <!-- Divider -->
            <line x1="210" y1="40" x2="210" y2="185" stroke="#333" stroke-width="1" />

            <!-- === PANEL 2: clip right === -->
            <text x="315" y="45" fill="#ccc" font-size="11" text-anchor="middle">② Clip right side</text>
            <!-- ref edge -->
            <line x1="265" y1="100" x2="370" y2="100" stroke="#00ff88" stroke-width="3" stroke-linecap="round" />
            <text x="317" y="116" fill="#00ff88" font-size="10" text-anchor="middle">ref edge</text>
            <!-- left plane (grey, already done) -->
            <line x1="265" y1="55" x2="265" y2="145" stroke="#888" stroke-width="1" stroke-dasharray="4,3" />
            <!-- right plane -->
            <line x1="370" y1="55" x2="370" y2="145" stroke="#ff4466" stroke-width="1.5" stroke-dasharray="4,3" />
            <text x="375" y="52" fill="#ff4466" font-size="9">right</text>
            <!-- incident edge after left clip (faded) -->
            <line x1="265" y1="83" x2="365" y2="130" stroke="#ffaa00" stroke-width="2" stroke-dasharray="4,3"
                opacity="0.4" />
            <!-- incident edge clipped right -->
            <line x1="265" y1="83" x2="348" y2="121" stroke="#ffaa00" stroke-width="3" stroke-linecap="round" />
            <circle cx="348" cy="121" r="4" fill="#ff4466" />
            <text x="353" y="118" fill="#ff4466" font-size="9">new pt</text>

            <!-- Divider -->
            <line x1="420" y1="40" x2="420" y2="185" stroke="#333" stroke-width="1" />

            <!-- === PANEL 3: depth filter === -->
            <text x="525" y="45" fill="#ccc" font-size="11" text-anchor="middle">③ Keep below ref edge</text>
            <!-- ref edge -->
            <line x1="465" y1="100" x2="580" y2="100" stroke="#00ff88" stroke-width="3" stroke-linecap="round" />
            <text x="522" y="93" fill="#00ff88" font-size="10" text-anchor="middle">ref edge</text>
            <!-- clipped segment -->
            <line x1="475" y1="83" x2="558" y2="121" stroke="#ffaa00" stroke-width="2" stroke-dasharray="3,3"
                opacity="0.4" />
            <!-- above ref — rejected -->
            <circle cx="475" cy="83" r="5" fill="none" stroke="#ff4466" stroke-width="2" />
            <line x1="471" y1="79" x2="479" y2="87" stroke="#ff4466" stroke-width="2" />
            <line x1="479" y1="79" x2="471" y2="87" stroke="#ff4466" stroke-width="2" />
            <text x="476" y="73" fill="#ff4466" font-size="9" text-anchor="middle">rejected</text>
            <!-- below ref — kept -->
            <circle cx="558" cy="121" r="5" fill="#00ff88" />
            <text x="558" y="138" fill="#00ff88" font-size="9" text-anchor="middle">contact!</text>
        </svg>